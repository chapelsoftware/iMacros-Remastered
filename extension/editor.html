<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iMacros Editor</title>
  <style>
/**
 * iMacros Macro Editor Styles
 */

/* Reset */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* Base styles */
html, body {
  height: 100%;
  overflow: hidden;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-size: 13px;
  line-height: 1.4;
  color: #333;
  background: #f0f0f0;
}

/* Editor container */
.editor-app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* Toolbar */
.editor-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: linear-gradient(to bottom, #4a7dc4 0%, #2d5aa0 100%);
  border-bottom: 1px solid #1a4080;
  color: white;
}

.toolbar-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toolbar-center {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toolbar-title {
  display: flex;
  align-items: center;
  gap: 8px;
}

.toolbar-logo {
  display: flex;
  align-items: center;
}

#editor-title {
  font-size: 14px;
  font-weight: 500;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Toolbar buttons */
.toolbar-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.toolbar-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
}

.toolbar-btn:active:not(:disabled) {
  background: rgba(0, 0, 0, 0.1);
}

.toolbar-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.toolbar-btn svg {
  flex-shrink: 0;
}

/* Primary button style */
.toolbar-btn-primary {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.4);
}

.toolbar-btn-primary:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.3);
}

/* Success button style (for Run) */
.toolbar-btn-success {
  background: linear-gradient(to bottom, #4caf50 0%, #388e3c 100%);
  border-color: #2e7d32;
}

.toolbar-btn-success:hover:not(:disabled) {
  background: linear-gradient(to bottom, #66bb6a 0%, #43a047 100%);
}

/* Danger button style (for Close) */
.toolbar-btn-danger {
  background: rgba(255, 100, 100, 0.2);
  border-color: rgba(255, 100, 100, 0.4);
}

.toolbar-btn-danger:hover:not(:disabled) {
  background: rgba(255, 100, 100, 0.3);
}

/* Editor container */
#editor-container {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  background: white;
}

#editor-container .cm-editor {
  height: 100%;
}

/* Status bar */
.editor-status {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 12px;
  background: linear-gradient(to bottom, #e8eef5 0%, #d8e2ed 100%);
  border-top: 1px solid #a8b8cc;
  font-size: 11px;
}

.status-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.status-right {
  display: flex;
  align-items: center;
  gap: 12px;
  color: #666;
}

#status-message {
  font-weight: 500;
  transition: color 0.2s;
}

.status-message.status-info {
  color: #1976d2;
}

.status-message.status-success {
  color: #388e3c;
}

.status-message.status-error {
  color: #d32f2f;
}

/* Keyboard shortcuts hint */
.shortcuts-hint {
  color: #888;
  font-size: 10px;
}

.shortcuts-hint kbd {
  display: inline-block;
  padding: 2px 5px;
  font-family: inherit;
  font-size: 10px;
  color: #555;
  background: #f0f0f0;
  border: 1px solid #ccc;
  border-radius: 3px;
  box-shadow: 0 1px 0 #aaa;
}

/* CodeMirror customizations */
.cm-editor .cm-scroller {
  font-family: 'Consolas', 'Monaco', 'Menlo', 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.5;
}

.cm-editor .cm-gutters {
  background: #f5f5f5;
  border-right: 1px solid #ddd;
  color: #999;
}

.cm-editor .cm-activeLineGutter {
  background: #e8f2ff;
}

.cm-editor .cm-activeLine {
  background: #f5faff;
}

.cm-editor .cm-selectionBackground {
  background: #b3d7ff !important;
}

.cm-editor.cm-focused .cm-selectionBackground {
  background: #b3d7ff !important;
}

/* Lint gutter markers */
.cm-editor .cm-lint-marker-error {
  content: '';
}

/* Autocomplete dropdown */
.cm-tooltip-autocomplete {
  font-family: 'Consolas', 'Monaco', 'Menlo', 'Courier New', monospace;
  font-size: 13px;
}

.cm-tooltip-autocomplete > ul > li {
  padding: 4px 8px;
}

.cm-tooltip-autocomplete > ul > li[aria-selected] {
  background: #1976d2;
  color: white;
}

/* Responsive adjustments */
@media (max-width: 600px) {
  .toolbar-btn span {
    display: none;
  }

  .toolbar-btn {
    padding: 8px;
  }

  .shortcuts-hint {
    display: none;
  }
}
  </style>
</head>
<body>
  <div class="editor-app">
    <!-- Toolbar -->
    <header class="editor-toolbar">
      <div class="toolbar-left">
        <div class="toolbar-title">
          <div class="toolbar-logo">
            <svg width="24" height="24" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="11" fill="#1a5fb4" stroke="#0d3b82" stroke-width="1"/>
              <text x="12" y="16" text-anchor="middle" font-size="11" fill="white" font-weight="bold">iM</text>
            </svg>
          </div>
          <span id="editor-title">New Macro</span>
        </div>
      </div>

      <div class="toolbar-center">
        <button id="btn-new" class="toolbar-btn" title="New Macro (Ctrl+N)">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M14 4.5V14a2 2 0 01-2 2H4a2 2 0 01-2-2V2a2 2 0 012-2h5.5L14 4.5zm-3 0A1.5 1.5 0 019.5 3V1H4a1 1 0 00-1 1v12a1 1 0 001 1h8a1 1 0 001-1V4.5h-2z"/>
            <path d="M8 6.5a.5.5 0 01.5.5v1.5H10a.5.5 0 010 1H8.5V11a.5.5 0 01-1 0V9.5H6a.5.5 0 010-1h1.5V7a.5.5 0 01.5-.5z"/>
          </svg>
          <span>New</span>
        </button>
        <button id="btn-save" class="toolbar-btn toolbar-btn-primary" title="Save (Ctrl+S)" disabled>
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M2 1a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4.414a1 1 0 00-.293-.707L12.293.293A1 1 0 0011.586 0H2zm0 1h9.586L14 4.414V14H2V2zm5 10a3 3 0 110-6 3 3 0 010 6zm0-1a2 2 0 100-4 2 2 0 000 4zm5-6H4v2h8V5z"/>
          </svg>
          <span>Save</span>
        </button>
        <button id="btn-run" class="toolbar-btn toolbar-btn-success" title="Run Macro (F5)">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4 2l10 6-10 6V2z"/>
          </svg>
          <span>Run</span>
        </button>
      </div>

      <div class="toolbar-right">
        <button id="btn-close" class="toolbar-btn toolbar-btn-danger" title="Close Editor">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M4.646 4.646a.5.5 0 01.708 0L8 7.293l2.646-2.647a.5.5 0 01.708.708L8.707 8l2.647 2.646a.5.5 0 01-.708.708L8 8.707l-2.646 2.647a.5.5 0 01-.708-.708L7.293 8 4.646 5.354a.5.5 0 010-.708z"/>
          </svg>
          <span>Close</span>
        </button>
      </div>
    </header>

    <!-- Editor -->
    <div id="editor-container"></div>

    <!-- Status bar -->
    <footer class="editor-status">
      <div class="status-left">
        <span id="status-message" class="status-message"></span>
      </div>
      <div class="status-right">
        <span class="shortcuts-hint">
          <kbd>Ctrl</kbd>+<kbd>S</kbd> Save |
          <kbd>Ctrl</kbd>+<kbd>N</kbd> New |
          <kbd>F5</kbd> Run
        </span>
      </div>
    </footer>
  </div>
  <script type="module" src="editor.js"></script>
</body>
</html>
