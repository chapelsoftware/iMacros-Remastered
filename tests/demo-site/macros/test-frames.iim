' test-frames.iim - Extract from frames and fill results table
' Requires: http://localhost:8080/frames.html

URL GOTO=http://localhost:8080/frames.html
WAIT SECONDS=1

' --- Profile frame (F=1) ---
FRAME F=1
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:profile-name EXTRACT=TXT
SET !VAR0 {{!EXTRACT}}
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:profile-email EXTRACT=TXT
SET !VAR1 {{!EXTRACT}}
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:profile-role EXTRACT=TXT
SET !VAR2 {{!EXTRACT}}

' --- Product frame (by name) ---
FRAME F=0
FRAME NAME=product
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:product-name EXTRACT=TXT
SET !VAR3 {{!EXTRACT}}
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:product-price EXTRACT=TXT
SET !VAR4 {{!EXTRACT}}

' --- Order frame (nested: dashboard -> order) ---
FRAME F=0
FRAME NAME=dashboard
FRAME NAME=order
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:order-number EXTRACT=TXT
SET !VAR5 {{!EXTRACT}}
SET !EXTRACT NULL
TAG POS=1 TYPE=DIV ATTR=ID:order-status EXTRACT=TXT
SET !VAR6 {{!EXTRACT}}

' --- Fill results table on main page ---
FRAME F=0
TAG POS=1 TYPE=INPUT ATTR=ID:r-name CONTENT={{!VAR0}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-email CONTENT={{!VAR1}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-role CONTENT={{!VAR2}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-product CONTENT={{!VAR3}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-price CONTENT={{!VAR4}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-order CONTENT={{!VAR5}}
TAG POS=1 TYPE=INPUT ATTR=ID:r-status CONTENT={{!VAR6}}
