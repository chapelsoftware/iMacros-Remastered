' test-frames.iim - Exercise FRAME F=n and FRAME NAME=name
' Requires: http://localhost:8080/frames.html

URL GOTO=http://localhost:8080/frames.html
WAIT SECONDS=1

' === Main Page Context (F=0) ===
FRAME F=0
TAG POS=1 TYPE=P ATTR=ID:main-page-text EXTRACT=TXT
SET !VAR0 {{!EXTRACT}}

' Fill input on main page
TAG POS=1 TYPE=INPUT ATTR=ID:main-input CONTENT=main-page-value

' === Frame 1 by Index ===
FRAME F=1
TAG POS=1 TYPE=H3 ATTR=ID:frame-title EXTRACT=TXT
SET !VAR1 {{!EXTRACT}}

' Type in frame input
TAG POS=1 TYPE=INPUT ATTR=ID:frame-input CONTENT=frame1-text

' Click button inside frame
TAG POS=1 TYPE=BUTTON ATTR=ID:frame-btn

' Extract result
TAG POS=1 TYPE=SPAN ATTR=ID:frame-result EXTRACT=TXT

' === Return to Main, Then Frame 2 by Name ===
FRAME F=0
FRAME NAME=frame2
TAG POS=1 TYPE=H3 ATTR=ID:frame-title EXTRACT=TXT
SET !VAR2 {{!EXTRACT}}

' Type in frame 2 input
TAG POS=1 TYPE=INPUT ATTR=ID:frame-input CONTENT=frame2-text

' === Nested Frame Access ===
' First navigate to the outer frame
FRAME F=0
FRAME NAME=frame-outer

' Extract outer frame text
TAG POS=1 TYPE=P ATTR=ID:outer-text EXTRACT=TXT
SET !VAR3 {{!EXTRACT}}

' Then navigate to nested frame within outer
FRAME NAME=frame-nested
TAG POS=1 TYPE=H3 ATTR=ID:frame-title EXTRACT=TXT
SET !VAR4 {{!EXTRACT}}

' Type in nested frame input
TAG POS=1 TYPE=INPUT ATTR=ID:frame-input CONTENT=nested-frame-text

' === Return to Main Page ===
FRAME F=0
TAG POS=1 TYPE=INPUT ATTR=ID:main-input EXTRACT=TXT
SET !VAR5 {{!EXTRACT}}
